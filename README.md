# Rust 入門

参考サイト : https://employment.en-japan.com/engineerhub/entry/2017/07/10/110000

##　環境構築

```shell
$ curl https://sh.rustup.rs -sSf | sh # この後1を入力！
$ echo 'export PATH=$HOME/.cargo/bin:$PATH' >> ~/.zshrc
$source ~/.zshrc
```


```shell
$ rustc hello.rs
$ ./hello
```

### Rust の型


|名前|説明|リテラル例|
|:---:|:---:|:---:|
|()|Unit型。何もないことを表わす|()|
|`bool`|真偽値|true, false|
|`char`|文字型|'x', '💕'|
|`i8`, `i16`, `i32`, `i64`|nビット符号付き整数|1, 2i8, -3_000i32|
|`u8`, `u16`, `u32`, `u64`|nビット符号無し整数|1, 2u8, 3_000u32|
|`isize`|マシンに合わせた符号付き整数|1, -3_000isize|
|`usize`|マシンに合わせた符号無し整数|1, 3_000usize|
|`f32`|32ビット浮動小数点数|1.0, -1.0f32|
|`f64`|64ビット浮動小数点数|1.0, -1.0f64|
|`&T`|T型への参照型|-|
|`&mut T`|T型へのミュータブルな参照型|-|
|`[T; n]`|T型のn個の要素を持つ配列|[1, 2, 3], [-1.0; 256]|
|`&[T]`|T型の要素を持つスライス|-|
|`str`|文字列型。通常は参照として&strの形で使われる|"abcd"|
|`(S, T, ...)`|任意個の型を並べたタプル型|(1, 1.0, false, "abc")|
|`fn (S, T, ..) -> R`|関数型|-|


`()`型は何もないことを表わす型です。唯一の値()を持ちます。

真偽値を表すbool型は、すでにif式を使ったときに登場しましたね。`bool`型には、trueとfalseという2つの値があります。

### 数値を表す型

Rustはシステムプログラミング言語なので、ビット数ごとに整数型が用意されています。

また、isize、 usizeという、配列などのコレクションのサイズを表わすのに十分な大きさの整数型もあります。これらの型で表される整数のビット数は、マシンによって変わります。

### 参照型

参照型は、C言語などのポインタ型に似た概念で、「T型の値のありか」を表わす型です。Rustにはあとで説明する所有権の概念があるので「T型の借用」とも呼ばれます。`&`値で参照型の値が作れます。

また、`&mut`のミュータブルな参照型は参照先を書き換えることができます。こちらも&mut 値で参照型の値が作れます。変数のときと違って、こちらは型の一部です。

どちらも、*値で参照を外し、参照先の値を取得することができますが、Rustはデータの扱いに厳しいので一定の条件を満たさないと参照外しができません。


```rust
fn main() {
    let x = 1;  // イミュータブルな束縛を作っておく。
    let y: &isize = &x;  // `&値` で参照がとれる。
    let mut a = 1;  // ミュータブルな束縛を作っておく。
    let b = &mut a;  // `&mut 値`でミュータブルな参照がとれる。値もミュータブルである必要がある。
    *b = 2;  // `*参照 = 値`で代入できる。これは`&mut`型ならいつでも可能。
    println!("{}", *b); // => 2  bの参照先が書き変わっている。aは一定の条件を満たしている（Copyな）ため参照外しができる。
}
```

 ### 配列とスライス

 配列型は、配列まるごとを表わす型です。

たとえば、[i64;256]という配列は、64ビット×256＝16Kビットのデータを表わします。この配列をコピーするときは、16Kビットのデータがコピーされます。扱うデータサイズもユーザ側で制御できるのが、Rustの特徴です。

一方、バイト列を表わすのに&[u8]のような型を使うこともあります。&[]というのは、配列への参照（ビュー）を表す型で、スライスと呼ばれます。スライスは、それ自体がデータを持っているわけではなく、データのありかを指すだけです。したがって配列に比べてデータサイズはずっと小さくなります。

